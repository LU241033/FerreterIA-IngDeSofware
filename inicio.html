<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="FerreterIA - Tu socio de confianza para soluciones de ferreter√≠a. Sistema de gesti√≥n de productos, tienda en l√≠nea y administraci√≥n de inventario.">
  <meta name="keywords" content="ferreter√≠a, gesti√≥n de inventario, tienda en l√≠nea, herramientas, materiales de construcci√≥n">
  <meta name="author" content="FerreterIA">
  <meta property="og:title" content="FerreterIA - Sistema de Gesti√≥n de Ferreter√≠a">
  <meta property="og:description" content="Tu socio de confianza para soluciones de ferreter√≠a">
  <meta property="og:type" content="website">
  <title>Inicio | FerreterIA</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="shortcut icon" href="/img/FAVICON.ico" type="image/x-icon">
</head>

<body>
  <!-- ENCABEZADO / NAVBAR-->
  <header class="barra-navegacion">
    <div class="contenedor">
      <h1 class="logo">FerreterIA</h1>
      <nav class="menu">
        <ul class="enlaces">
          <li><a href="./inicio.html">Inicio</a></li>
          <li><a href="html/usuario/carrito.html">Carrito <span class="contador-carrito" style="display:none;">0</span></a></li>
          <li><a href="html/comunes/acerca-de-nosotros.html">Acerca de nosotros</a></li>
        </ul>
      </nav>

      <!-- üîπ Botones din√°micos seg√∫n sesi√≥n -->
      <div class="botones" id="botonesAuth">
  <button class="btn-borde" onclick="location.href='html/iniciar-sesion.html'">Iniciar sesi√≥n</button>
  <button class="btn-principal" onclick="location.href='html/usuario/registro.html'">Registrarse</button>
</div>

  </header>

  <!-- SECCI√ìN PRINCIPAL -->
  <section class="seccion-principal">
    <div class="contenido-principal">
      <div class="texto">
        <h2>FerreterIA</h2>
        <!-- Contenido din√°mico seg√∫n rol -->
        <div id="contenido-bienvenida">
          <!-- Se mostrar√° contenido diferente seg√∫n el rol -->
          <p>
            Nuestro sistema te permite gestionar stock, registrar productos y obtener
            reportes de tus ventas para optimizar tus resultados en tiempo real. 
            ¬°Simplifica la administraci√≥n de tu negocio!
          </p>
          <button class="btn-claro" onclick="location.href='html/usuario/registro.html'">Comienza ahora</button>
        </div>
      </div>
      <div class="imagen">
        <img src="/img/desconocido.jpg" alt="Imagen principal de la ferreter√≠a">
      </div>
    </div>
  </section>

  <!-- SECCI√ìN DE FUNCIONES -->
  <section class="funciones">
    <h2 id="titulo-funciones">Funciones que Facilitan la Gesti√≥n de tu Ferreter√≠a</h2>
    <div class="tarjetas" id="tarjetas-funciones">
      <!-- Contenido din√°mico seg√∫n rol -->
      <div class="tarjeta">
        <h3>Gesti√≥n r√°pida de productos</h3>
        <p>Registra, consulta, actualiza o elimina productos en segundos. Mant√©n tu inventario al d√≠a con un solo clic.</p>
      </div>
      <div class="tarjeta">
        <h3>Control de inventario autom√°tico</h3>
        <p>Supervisa las existencias f√°cilmente y recibe alertas cuando los productos est√©n por agotarse.</p>
      </div>
      <div class="tarjeta">
        <h3>Reportes y estad√≠sticas</h3>
        <p>Obt√©n reportes claros sobre ventas, productos m√°s vendidos y niveles de stock para tomar mejores decisiones.</p>
      </div>
    </div>
    </section>

  <!-- PIE DE P√ÅGINA -->
  <footer class="pie-pagina">
    <div class="contenedor-pie">
      <div>
        <h4>FerreterIA</h4>
        <p>Tu socio de confianza para soluciones seguras y eficientes.</p>
      </div>
      <div>
        <h4>Enlaces r√°pidos</h4>
        <ul>
          <li><a href="/inicio.html">Inicio</a></li>
          <li><a href="/html/comunes/acerca-de-nosotros.html">Acerca de</a></li>
          <li><a href="/html/usuario/carrito.html">Carrito</a></li>
        </ul>
      </div>
      <div>
        <h4>Servicios</h4>
        <ul>
          <li>Gesti√≥n de productos</li>
          <li>Reportes</li>
          <li>Control de inventario</li>
        </ul>
      </div>
      <div>
        <h4>Cont√°ctanos</h4>
        <p>Email: info@ferreteria.com<br>Tel: 312-XXX-XXXX</p>
      </div>
    </div>
    <p class="copy">&copy; 2025 FerreterIA. Todos los derechos reservados.</p>
  </footer>

  <!-- üîπ SCRIPT DE CONTROL DE SESI√ìN -->
  <script src="js/utils.js"></script>
  <script src="js/productos.js"></script>
  <script src="js/cart.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Actualizar contador de carrito
      // Solo actualizar contador si hay sesi√≥n activa
      const usuario = verificarAutenticacion();
      if (usuario) {
        gestorCarrito.actualizarContadorCarrito();
      } else {
        // Ocultar contador si no hay sesi√≥n
        const contadores = document.querySelectorAll('.contador-carrito');
        contadores.forEach(contador => {
          contador.style.display = 'none';
        });
      }
      
      // Proteger enlaces del carrito - solo funcionan con sesi√≥n activa de USUARIO (NO administrador)
      const enlacesCarrito = document.querySelectorAll('a[href*="carrito.html"]');
      enlacesCarrito.forEach(enlace => {
        enlace.addEventListener('click', (e) => {
          const usuario = verificarAutenticacion();
          if (!usuario) {
            e.preventDefault();
            mostrarMensaje('‚ö†Ô∏è Debes iniciar sesi√≥n para acceder al carrito', 'warning');
            setTimeout(() => {
              window.location.href = 'html/iniciar-sesion.html';
            }, 1500);
            return false;
          }
          // Los administradores NO pueden acceder al carrito
          if (usuario.rol === 'admin') {
            e.preventDefault();
            mostrarMensaje('‚ö†Ô∏è Los administradores no pueden realizar compras. Solo pueden gestionar productos.', 'warning');
            setTimeout(() => {
              window.location.href = 'html/admin/panel-admin.html';
            }, 2000);
            return false;
          }
        });
      });
      
      const usuarioActivo = verificarAutenticacion();
      const botonesDiv = document.getElementById("botonesAuth");
      const enlacesNav = document.querySelector('.enlaces');
      const contenidoBienvenida = document.getElementById('contenido-bienvenida');
      const tituloFunciones = document.getElementById('titulo-funciones');
      const tarjetasFunciones = document.getElementById('tarjetas-funciones');

      if (usuarioActivo) {
        // Actualizar botones de autenticaci√≥n
        const badgeAdmin = usuarioActivo.rol === 'admin' 
          ? '<span style="background: #f59e0b; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; margin-right: 10px;">üëë ADMIN</span>' 
          : '';
        
        botonesDiv.innerHTML = `
          ${badgeAdmin}
          <span class="usuario-saludo" style="color:white; margin-right:10px;">Hola, ${usuarioActivo.usuario}</span>
          <button class="btn-borde" onclick="cerrarSesion()">Cerrar sesi√≥n</button>
        `;
        
        // Agregar enlace al dashboard seg√∫n rol
        const enlaceDashboard = document.createElement('li');
        if (usuarioActivo.rol === 'admin') {
          enlaceDashboard.innerHTML = '<a href="html/admin/panel-admin.html" style="color: #fbbf24;">üëë Panel Admin</a>';
        } else {
          enlaceDashboard.innerHTML = '<a href="html/usuario/tienda.html">üõí Tienda</a>';
        }
        enlacesNav.appendChild(enlaceDashboard);

        // ===== OCULTAR ENLACES AL CARRITO PARA ADMINISTRADORES =====
        // Los administradores no pueden realizar compras, solo gestionar productos
        if (usuarioActivo.rol === 'admin') {
          // Ocultar todos los enlaces al carrito en la navegaci√≥n
          const enlacesCarritoNav = document.querySelectorAll('a[href*="carrito.html"], a[href*="Carrito"]');
          enlacesCarritoNav.forEach(enlace => {
            const liPadre = enlace.closest('li');
            if (liPadre) {
              liPadre.style.display = 'none';
            } else {
              enlace.style.display = 'none';
            }
          });
          
          // Ocultar botones y enlaces al carrito en el contenido
          const botonesCarrito = document.querySelectorAll('button[onclick*="carrito"], a[href*="carrito"]');
          botonesCarrito.forEach(boton => {
            // Solo ocultar si no es un enlace de navegaci√≥n ya oculto
            if (!boton.closest('nav') || !boton.closest('ul.enlaces')) {
              boton.style.display = 'none';
            }
          });
        }

        // ===== CONTENIDO DIFERENCIADO SEG√öN ROL =====
        if (usuarioActivo.rol === 'admin') {
          // Vista para ADMIN
          const stats = gestorProductos.obtenerEstadisticas();
          
          contenidoBienvenida.innerHTML = `
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white; margin-bottom: 20px;">
              <h3 style="margin-bottom: 10px;">üëë Bienvenido, Administrador</h3>
              <p style="margin-bottom: 15px;">Tienes acceso completo al sistema de gesti√≥n de productos.</p>
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
              <div style="background: #fef3c7; padding: 15px; border-radius: 8px; border-left: 4px solid #d97706;">
                <strong style="color: #1e40af;">Total Productos:</strong>
                <div style="font-size: 1.5em; color: #d97706; font-weight: bold;">${stats.total}</div>
              </div>
              <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #ef4444;">
                <strong style="color: #991b1b;">Stock Bajo:</strong>
                <div style="font-size: 1.5em; color: #ef4444; font-weight: bold;">${stats.stockBajo}</div>
              </div>
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
              <button class="btn-claro" onclick="location.href='html/admin/panel-admin.html'" style="background: linear-gradient(135deg, #d97706 0%, #ea580c 100%); color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                üõ†Ô∏è Ir al Panel de Administraci√≥n
              </button>
              <button class="btn-claro" onclick="location.href='html/admin/registrar-producto.html'" style="background: #10b981; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                ‚ûï Registrar Producto
              </button>
            </div>
          `;

          tituloFunciones.textContent = 'Funciones de Administraci√≥n';
          tarjetasFunciones.innerHTML = `
            <div class="tarjeta" style="border-left: 4px solid #d97706;">
              <h3>üõ†Ô∏è Gesti√≥n Completa de Productos</h3>
              <p>Registra, consulta, actualiza o elimina productos. Control total del inventario desde un solo lugar.</p>
              <a href="html/admin/panel-admin.html" style="color: #d97706; font-weight: bold; margin-top: 10px; display: inline-block;">Ver Panel ‚Üí</a>
            </div>
            <div class="tarjeta" style="border-left: 4px solid #10b981;">
              <h3>üìä Estad√≠sticas en Tiempo Real</h3>
              <p>Visualiza estad√≠sticas detalladas: total de productos, stock bajo, categor√≠as y valor del inventario.</p>
              <a href="html/admin/panel-admin.html" style="color: #10b981; font-weight: bold; margin-top: 10px; display: inline-block;">Ver Estad√≠sticas ‚Üí</a>
            </div>
            <div class="tarjeta" style="border-left: 4px solid #f59e0b;">
              <h3>üîç B√∫squeda y Filtros Avanzados</h3>
              <p>Encuentra productos r√°pidamente con b√∫squeda por nombre, categor√≠a, ID o estado de stock.</p>
              <a href="html/admin/consultar-producto.html" style="color: #f59e0b; font-weight: bold; margin-top: 10px; display: inline-block;">Buscar Productos ‚Üí</a>
            </div>
          `;
        } else {
          // Vista para USUARIO
          const productos = gestorProductos.obtenerTodos();
          const productosDisponibles = productos.filter(p => p.stock > 0).length;
          const categorias = [...new Set(productos.map(p => p.categoria))].length;
          
          contenidoBienvenida.innerHTML = `
            <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 20px; border-radius: 12px; color: white; margin-bottom: 20px;">
              <h3 style="margin-bottom: 10px;">üëã ¬°Bienvenido, ${usuarioActivo.usuario}!</h3>
              <p style="margin-bottom: 15px;">Explora nuestro cat√°logo completo de productos de ferreter√≠a.</p>
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
              <div style="background: #fef3c7; padding: 15px; border-radius: 8px; border-left: 4px solid #d97706;">
                <strong style="color: #1e40af;">Productos Disponibles:</strong>
                <div style="font-size: 1.5em; color: #d97706; font-weight: bold;">${productosDisponibles}</div>
              </div>
              <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                <strong style="color: #166534;">Categor√≠as:</strong>
                <div style="font-size: 1.5em; color: #10b981; font-weight: bold;">${categorias}</div>
              </div>
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
              <button class="btn-claro" onclick="location.href='html/usuario/tienda.html'" style="background: linear-gradient(135deg, #d97706 0%, #ea580c 100%); color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                üõí Ir a la Tienda
              </button>
              <button class="btn-claro" onclick="location.href='html/usuario/carrito.html'" style="background: #10b981; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                üõí Ver Carrito
              </button>
            </div>
          `;

          tituloFunciones.textContent = 'Explora Nuestros Productos';
          tarjetasFunciones.innerHTML = `
            <div class="tarjeta" style="border-left: 4px solid #d97706;">
              <h3>üõí Tienda en L√≠nea</h3>
              <p>Explora todos nuestros productos disponibles con im√°genes, precios y disponibilidad en stock. Agrega productos a tu carrito.</p>
              <a href="html/usuario/tienda.html" style="color: #d97706; font-weight: bold; margin-top: 10px; display: inline-block;">Ir a la Tienda ‚Üí</a>
            </div>
            <div class="tarjeta" style="border-left: 4px solid #10b981;">
              <h3>üõí Carrito de Compras</h3>
              <p>Gestiona tus productos seleccionados, actualiza cantidades y procede al checkout cuando est√©s listo.</p>
              <a href="html/usuario/carrito.html" style="color: #10b981; font-weight: bold; margin-top: 10px; display: inline-block;">Ver Carrito ‚Üí</a>
            </div>
            <div class="tarjeta" style="border-left: 4px solid #f59e0b;">
              <h3>‚úÖ Compra Segura</h3>
              <p>Finaliza tu compra de forma segura con nuestro proceso de checkout simplificado y m√©todos de pago flexibles.</p>
              <a href="html/usuario/tienda.html" style="color: #f59e0b; font-weight: bold; margin-top: 10px; display: inline-block;">Comprar Ahora ‚Üí</a>
            </div>
          `;
        }
      }
    });
  </script>
</body>
</html>
